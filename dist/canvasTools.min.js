"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],a=!0,i=!1,n=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!e||r.length!==e);a=!0);}catch(t){i=!0,n=t}finally{try{a||null==l.return||l.return()}finally{if(i)throw n}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"function"==typeof define&&define.amd?define(["CanvasTool"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e():t.CanvasTool=e()}(window,function(){var u=Symbol("textBreakline"),f=Symbol("validateRlues"),x=Symbol("letterSpacingText"),b=Symbol("setFillStyle"),m=Symbol("setStrokeStyle"),g=Symbol("setFontSize");return function(){function r(t,e){_classCallCheck(this,r),this.ctx=t,this.scale=e||1}return _createClass(r,[{key:"line",value:function(t){var e=t.sx,r=t.sy,a=t.ex,i=t.ey,n=t.strokeWidth,o=t.strokeStyle,l=new Map([[e,{type:"number",param:"sx"}],[r,{type:"number",param:"sy"}],[a,{type:"number",param:"ex"}],[i,{type:"number",param:"ey"}],[n,{type:"number",param:"strokeWidth"}],[o,{type:"string",param:"strokeStyle"}]]);this[f](l),e=e||0,r=r||0,a=a||100,i=i||100,o=o||"#000",n=n||2,this.ctx.beginPath(),this.ctx.moveTo(e,r),this.ctx.lineTo(a,i),this[m](n,o),this.ctx.stroke()}},{key:"triangle",value:function(t){var e=t.fx,r=t.fy,a=t.sx,i=t.sy,n=t.tx,o=t.ty,l=t.stroke,s=t.strokeWidth,p=t.strokeStyle,y=t.fill,c=t.bgColor,h=new Map([[e,{type:"number",param:"fx"}],[r,{type:"number",param:"fy"}],[a,{type:"number",param:"sx"}],[i,{type:"number",param:"sy"}],[n,{type:"number",param:"tx"}],[o,{type:"number",param:"ty"}],[s,{type:"number",param:"strokeWidth"}],[c,{type:"string",param:"bgColor"}],[p,{type:"string",param:"strokeStyle"}],[l,{type:"boolean",param:"stroke"}],[y,{type:"boolean",param:"fill"}]]);this[f](h),e=e||0,r=r||0,c=c||"#fff",p=p||"#000",y=y||!1,s=s||1,this.ctx.beginPath(),this.ctx.moveTo(e,r),this.ctx.lineTo(a,i),this.ctx.lineTo(n,o),y&&(this[b](c),this.ctx.fill()),l&&(this[m](s,p),this.ctx.stroke())}},{key:"rect",value:function(t){var e=t.x,r=t.y,a=t.width,i=t.height,n=t.bgColor,o=t.fill,l=t.stroke,s=t.strokeStyle,p=t.strokeWidth,y=new Map([[e,{type:"number",param:"x"}],[r,{type:"number",param:"y"}],[a,{type:"number",param:"width"}],[i,{type:"number",param:"height"}],[p,{type:"number",param:"strokeWidth"}],[n,{type:"string",param:"bgColor"}],[s,{type:"string",param:"strokeStyle"}],[l,{type:"boolean",param:"stroke"}],[o,{type:"boolean",param:"fill"}]]);this[f](y),e=e||0,r=r||0,n=n||"#fff",s=s||"#000",o=o||!1,p=p||1,this.ctx.rect(e,r,a,i),o&&(this[b](n),this.ctx.fill()),l&&(this[m](p,s),this.ctx.strokeRect(e,r,a+p,i+p))}},{key:"roundRect",value:function(t){var e=t.x,r=t.y,a=t.width,i=t.height,n=t.r,o=t.bgColor,l=new Map([[e,{type:"number",param:"x"}],[r,{type:"number",param:"y"}],[a,{type:"number",param:"width"}],[i,{type:"number",param:"height"}],[n,{type:"number",param:"r"}],[o,{type:"string",param:"bgColor"}]]);this[f](l),this.ctx.beginPath(),this[b](o),this.ctx.arc(e+n,r+n,n,Math.PI,1.5*Math.PI),this.ctx.moveTo(e+n,r),this.ctx.lineTo(e+a-n,r),this.ctx.lineTo(e+a,r+n),this.ctx.arc(e+a-n,r+n,n,1.5*Math.PI,2*Math.PI),this.ctx.lineTo(e+a,r+i-n),this.ctx.lineTo(e+a-n,r+i),this.ctx.arc(e+a-n,r+i-n,n,0,.5*Math.PI),this.ctx.lineTo(e+n,r+i),this.ctx.lineTo(e,r+i-n),this.ctx.arc(e+n,r+i-n,n,.5*Math.PI,Math.PI),this.ctx.lineTo(e,r+n),this.ctx.lineTo(e+n,r),this.ctx.fill()}},{key:"square",value:function(t){t.height=t.width,this.rect(t)}},{key:"arc",value:function(t){var e=t.x,r=t.y,a=t.r,i=t.sAngle,n=t.eAngle,o=t.counterclockwise,l=t.fill,s=t.bgColor,p=t.strokeStyle,y=t.strokeWidth,c=t.storke,h=new Map([[e,{type:"number",param:"x"}],[r,{type:"number",param:"y"}],[a,{type:"number",param:"r"}],[i,{type:"number",param:"sAngle"}],[n,{type:"number",param:"eAngle"}],[y,{type:"number",param:"strokeWidth"}],[o,{type:"number",param:"counterclockwise"}],[l,{type:"boolean",param:"fill"}],[c,{type:"boolean",param:"storke"}],[s,{type:"string",params:"bgColor"}],[p,{type:"string",params:"strokeStyle"}]]);this[f](h),e=e||0,r=r||0,i=i||0,n=n||0,l=l||!1,s=s||"#000",this.ctx.beginPath(),this.ctx.arc(e,r,a,i*Math.PI,n*Math.PI,o),c&&(this[m](y,p),this.ctx.stroke()),l&&(this[b](s),this.ctx.fill())}},{key:"circleAvatar",value:function(t){var e=t.img,r=t.opts,a=t.beforeFn,i=t.afterFn,n=r.x,o=r.y,l=r.r,s=new Map([[n,{type:"number",param:"x"}],[o,{type:"number",param:"y"}],[l,{type:"number",param:"r"}]]);return this[f](s),isFunction(a)&&a(),this.drawCircle({x:n,y:o,r:l}),ctx.clip(),ctx.drawImage(e,n,o,l),ctx.restore(),isFunction(i)&&i(),this}},{key:"text",value:function(t){var e=t.text,r=t.color,a=t.fontSize,i=t.fontStyle,n=t.align,o=t.x,l=t.y,s=t.width,p=t.textBaseline,y=t.wrap,c=t.lineHeight,h=t.letterSpacing,m=new Map([[e,{type:"string",param:"text"}],[r,{type:"string",param:"color"}],[p,{type:"string",param:"textBaseline"}],[n,{type:"string",param:"align"}],[i,{type:"string",param:"fontStyle"}],[a,{type:"number",param:"fontSize"}],[o,{type:"number",param:"x"}],[l,{type:"number",param:"y"}],[s,{type:"number",param:"width"}],[c,{type:"number",param:"lineHeight"}],[h,{type:"number",param:"letterSpacing"}],[y,{type:"boolean",param:"wrap"}]]);this[f](m),r=r||"",a=a||16,n=n||"center",o=o||0,l=l||0,s=s||0,y=y||!1,h=h||0,this[b](r),this[g](a*this.scale),this.ctx.textAlign=n,p&&(this.ctx.setTextBaseline=p),y||h||this.ctx.fillText(e,o,l,s),y&&this[u](e,o,l,s,c),h&&this[x](e,n,o,l,h)}},{key:b,value:function(t){this.ctx.fillStyle=t}},{key:m,value:function(t,e){this.ctx.lineWidth=t,this.ctx.strokeStyle=e}},{key:g,value:function(t,e){var r=1<arguments.length&&void 0!==e?e:"Microsoft YaHei";console.log(t,r),this.ctx.font="".concat(t,"px ").concat(r)}},{key:u,value:function(t,e,r,a,i){for(var n=t.split(""),o="",l=0;l<n.length;l++){var s=o+n[l];a<this.ctx.measureText(s).width&&0<l?(this.ctx.fillText(o,e,r),o=n[l],r+=i):o=s}this.ctx.fillText(o,e,r)}},{key:x,value:function(t,e,r,a,i){var n=this.ctx,o=t.split(""),l=e||"left",s=n.measureText(t).width+i*(o.length-1);"center"==l?r-=s/2:"right"==l&&(r-=s),n.textAlign="left",o.forEach(function(t){var e=n.measureText(t).width;n.fillText(t,r,a),r=r+e+i}),n.textAlign=l}},{key:f,value:function(t){try{var e=!0,r=!1,a=void 0;try{for(var i,n=t.entries()[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var o=_slicedToArray(i.value,2),l=o[0],s=o[1];if(l&&_typeof(l)!=s.type)throw new Error(s.param+"的参数类型错误,要求是"+s.type+"类型")}}catch(t){r=!0,a=t}finally{try{e||null==n.return||n.return()}finally{if(r)throw a}}}catch(t){console.error(t)}}}]),r}()});