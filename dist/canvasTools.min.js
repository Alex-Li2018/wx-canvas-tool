"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!e||r.length!==e);a=!0);}catch(t){n=!0,i=t}finally{try{a||null==l.return||l.return()}finally{if(n)throw i}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"function"==typeof define&&define.amd?define(["CanvasTool"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e():t.CanvasTool=e()}(window,function(){var f=Symbol("textBreakline"),h=Symbol("validateRlues"),b=Symbol("letterSpacingText"),x=Symbol("setFillStyle"),m=Symbol("setStrokeStyle"),g=Symbol("setFontSize");return function(){function r(t,e){_classCallCheck(this,r),this.ctx=t,this.scale=e||1}return _createClass(r,[{key:"line",value:function(t){var e=t.sx,r=t.sy,a=t.ex,n=t.ey,i=t.strokeWidth,o=t.strokeStyle,l=new Map([[e,{type:"number",param:"sx"}],[r,{type:"number",param:"sy"}],[a,{type:"number",param:"ex"}],[n,{type:"number",param:"ey"}],[i,{type:"number",param:"strokeWidth"}],[o,{type:"string",param:"strokeStyle"}]]);this[h](l),e=e||0,r=r||0,a=a||100,n=n||100,o=o||"#000",i=i||2,this.ctx.beginPath(),this.ctx.moveTo(e,r),this.ctx.lineTo(a,n),this[m](i,o),this.ctx.stroke()}},{key:"triangle",value:function(t){var e=t.fx,r=t.fy,a=t.sx,n=t.sy,i=t.tx,o=t.ty,l=t.stroke,s=t.strokeWidth,y=t.strokeStyle,p=t.fill,c=t.bgColor,u=new Map([[e,{type:"number",param:"fx"}],[r,{type:"number",param:"fy"}],[a,{type:"number",param:"sx"}],[n,{type:"number",param:"sy"}],[i,{type:"number",param:"tx"}],[o,{type:"number",param:"ty"}],[s,{type:"number",param:"strokeWidth"}],[c,{type:"string",param:"bgColor"}],[y,{type:"string",param:"strokeStyle"}],[l,{type:"boolean",param:"stroke"}],[p,{type:"boolean",param:"fill"}]]);this[h](u),e=e||0,r=r||0,c=c||"#fff",y=y||"#000",p=p||!1,s=s||1,this.ctx.beginPath(),this.ctx.moveTo(e,r),this.ctx.lineTo(a,n),this.ctx.lineTo(i,o),p&&(this[x](c),this.ctx.fill()),l&&(this[m](s,y),this.ctx.stroke())}},{key:"rect",value:function(t){var e=t.x,r=t.y,a=t.width,n=t.height,i=t.bgColor,o=t.fill,l=t.stroke,s=t.strokeStyle,y=t.strokeWidth,p=new Map([[e,{type:"number",param:"x"}],[r,{type:"number",param:"y"}],[a,{type:"number",param:"width"}],[n,{type:"number",param:"height"}],[y,{type:"number",param:"strokeWidth"}],[i,{type:"string",param:"bgColor"}],[s,{type:"string",param:"strokeStyle"}],[l,{type:"boolean",param:"stroke"}],[o,{type:"boolean",param:"fill"}]]);this[h](p),e=e||0,r=r||0,i=i||"#fff",s=s||"#000",o=o||!1,y=y||1,this.ctx.rect(e,r,a,n),o&&(this[x](i),this.ctx.fill()),l&&(this[m](y,s),this.ctx.strokeRect(e,r,a+y,n+y))}},{key:"square",value:function(t){t.height=t.width,this.rect(t)}},{key:"arc",value:function(t){var e=t.x,r=t.y,a=t.r,n=t.sAngle,i=t.eAngle,o=t.counterclockwise,l=t.fill,s=t.bgColor,y=t.strokeStyle,p=t.strokeWidth,c=t.storke,u=new Map([[e,{type:"number",param:"x"}],[r,{type:"number",param:"y"}],[a,{type:"number",param:"r"}],[n,{type:"number",param:"sAngle"}],[i,{type:"number",param:"eAngle"}],[p,{type:"number",param:"strokeWidth"}],[o,{type:"number",param:"counterclockwise"}],[l,{type:"boolean",param:"fill"}],[c,{type:"boolean",param:"storke"}],[s,{type:"string",params:"bgColor"}],[y,{type:"string",params:"strokeStyle"}]]);this[h](u),e=e||0,r=r||0,n=n||0,i=i||0,l=l||!1,s=s||"#000",this.ctx.beginPath(),this.ctx.arc(e,r,a,n*Math.PI,i*Math.PI,o),c&&(this[m](p,y),this.ctx.stroke()),l&&(this[x](s),this.ctx.fill())}},{key:"text",value:function(t){var e=t.text,r=t.color,a=t.fontSize,n=t.fontStyle,i=t.align,o=t.x,l=t.y,s=t.width,y=t.textBaseline,p=t.wrap,c=t.lineHeight,u=t.letterSpacing,m=new Map([[e,{type:"string",param:"text"}],[r,{type:"string",param:"color"}],[y,{type:"string",param:"textBaseline"}],[i,{type:"string",param:"align"}],[n,{type:"string",param:"fontStyle"}],[a,{type:"number",param:"fontSize"}],[o,{type:"number",param:"x"}],[l,{type:"number",param:"y"}],[s,{type:"number",param:"width"}],[c,{type:"number",param:"lineHeight"}],[u,{type:"number",param:"letterSpacing"}],[p,{type:"boolean",param:"wrap"}]]);this[h](m),r=r||"",a=a||16,i=i||"center",o=o||0,l=l||0,s=s||0,p=p||!1,u=u||0,this[x](r),this[g](a*this.scale),this.ctx.textAlign=i,y&&(this.ctx.setTextBaseline=y),p||u||this.ctx.fillText(e,o,l,s),p&&this[f](e,o,l,s,c),u&&this[b](e,i,o,l,u)}},{key:x,value:function(t){this.ctx.fillStyle=t}},{key:m,value:function(t,e){this.ctx.lineWidth=t,this.ctx.strokeStyle=e}},{key:g,value:function(t,e){var r=1<arguments.length&&void 0!==e?e:"Microsoft YaHei";console.log(t,r),this.ctx.font="".concat(t,"px ").concat(r)}},{key:f,value:function(t,e,r,a,n){for(var i=t.split(""),o="",l=0;l<i.length;l++){var s=o+i[l];a<this.ctx.measureText(s).width&&0<l?(this.ctx.fillText(o,e,r),o=i[l],r+=n):o=s}this.ctx.fillText(o,e,r)}},{key:b,value:function(t,e,r,a,n){var i=this.ctx,o=t.split(""),l=e||"left",s=i.measureText(t).width+n*(o.length-1);"center"==l?r-=s/2:"right"==l&&(r-=s),i.textAlign="left",o.forEach(function(t){var e=i.measureText(t).width;i.fillText(t,r,a),r=r+e+n}),i.textAlign=l}},{key:h,value:function(t){try{var e=!0,r=!1,a=void 0;try{for(var n,i=t.entries()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=_slicedToArray(n.value,2),l=o[0],s=o[1];if(l&&_typeof(l)!=s.type)throw new Error(s.param+"的参数类型错误,要求是"+s.type+"类型")}}catch(t){r=!0,a=t}finally{try{e||null==i.return||i.return()}finally{if(r)throw a}}}catch(t){console.error(t)}}}]),r}()});